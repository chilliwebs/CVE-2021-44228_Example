FROM maven:3.8.4-jdk-8 AS builder
COPY ./src /app/src
COPY ./pom.xml /app/pom.xml
WORKDIR /app
RUN mvn clean package -DskipTests

# Vunerable java version
FROM openjdk:8u181-jdk-alpine
COPY --from=builder /app/target/GuineaPig-1.0-all.jar /app/GuineaPig-1.0-all.jar
WORKDIR /app

# -Dlog4j.debug -Dcom.sun.jndi.ldap.object.trustURLCodebase=true
ENTRYPOINT java -cp GuineaPig-1.0-all.jar gp.GuineaPig